!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.TreeFlowWidget=o():e.TreeFlowWidget=o()}(this,()=>(function(){"use strict";var e;function o(){var e=document.currentScript||document.querySelector('script[src*="widget-loader"]')||document.querySelector("script[data-treeflow-config]"),o=window.treeflowConfig||{},t={};if(e)for(var r=e.attributes,d=0;d<r.length;d++){var n=r[d];n.name.startsWith("data-")&&(t[n.name.replace("data-","").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})]=n.value)}return Object.assign({title:"TreeFlow Chat",endpoint:"",primaryColor:"#2563eb",secondaryColor:"#f3f4f6",textColor:"#1f2937",position:"bottom-right",autoWelcome:!1,welcomeMessage:"¡Hola! ¿En qué puedo ayudarte?",placeholder:"Escribe tu mensaje...",width:"350px",height:"500px",zIndex:"1000",autoLoad:!0},t,o)}function t(){return new Promise(function(e,o){if(window.customElements)if(window.customElements.get("treeflow-widget"))e();else{var t=document.createElement("script"),r=(d=document.currentScript||document.querySelector('script[src*="widget-loader"]'))&&d.src?d.src.replace(/[^/]*$/,""):"./";t.src=r+"treeflow-widget.js",t.onload=function(){e()},t.onerror=function(){o(new Error("Failed to load TreeFlow widget"))},document.head.appendChild(t)}else o(new Error("Custom Elements not supported"));var d})}function r(e){var o=document.querySelector("treeflow-widget");o&&o.remove();var t=document.createElement("treeflow-widget");return Object.keys(e).forEach(function(o){if(void 0!==e[o]&&null!==e[o]){var r=o.replace(/([A-Z])/g,"-$1").toLowerCase();t.setAttribute(r,e[o])}}),document.body.appendChild(t),window.treeflowWidget=t,t}function d(){if(!window.TreeFlowWidgetLoader.loaded){var e=o();t().then(function(){var o=r(e);window.TreeFlowWidgetLoader.loaded=!0;var t=new CustomEvent("treeflow-widget-loaded",{detail:{widget:o,config:e}});window.dispatchEvent(t),console.log("TreeFlow Widget loaded successfully")}).catch(function(e){console.error("TreeFlow Widget failed to load:",e);var o=new CustomEvent("treeflow-widget-error",{detail:{error:e}});window.dispatchEvent(o)})}}window.TreeFlowWidgetLoader||(window.TreeFlowWidgetLoader={version:"1.0.0",loaded:!1},window.TreeFlowWidgetLoader.init=d,window.TreeFlowWidgetLoader.getConfig=o,window.TreeFlowWidgetLoader.loadWidget=t,window.TreeFlowWidgetLoader.mountWidget=r,!1!==(e=o()).autoLoad&&"false"!==e.autoLoad&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d()))}(),{}));